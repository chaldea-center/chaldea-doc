# 应用设置

设置页主要包含了以下几个部分：

## Chaldea User

一个简易的用户系统，仅用于备份数据至服务器并实现多设备同步数据。没有此需求可以不用创建账号，不影响其他一切应用内的功能。
::: warning
没有安全保证，请勿使用常用密码
:::

## 游戏账号设置

- 多个账号切换
- 所属游戏区服

## 应用数据

> 数据根目录(`root_path`): 本应用所有数据保存的根目录，可用于手动备份还原。

::: warning
对于 Android 和 iOS，卸载应用将彻底删除`root_path`，导致所有数据丢失，请注意备份。
:::

不同操作系统根目录不同
| OS | 根目录 |
| :------- | :-------------------------------------- |
| iOS | `文件应用/我的iPhone/Chaldea/` |
| Android | `{emulated or SD card}/Android/data/cc.narumi.chaldea/files/` |
| Windows | `chaldea.exe所在目录/userdata` |
| macOS | `/Users/<user>/Library/Containers/cc.narumi.chaldea/Data/Documents/` |

> 实际路径可在`用户数据-数据目录`中查看

::: warning
Android: 若存在 SD 卡，用户可选择是否启用外部储存(SD 卡)，请注意区分内部储存和外部储存的路径，可以在用户数据中设置。但是不保证高可用性。
:::

文件目录结构

```:no-line-numbers
root_path
├── assets  // 图片等资源下载存放位置
├── backup  // 每日备份userdata.json于此
├── game    // 应用数据
├── downloads
├── ffo_output
├── logs
├── temp
└── user
    ├── settings.json   // 本地设置文件
    └── userdata.json   // 用户相关所有数据，备份这个最重要
```

### 用户数据管理

- 在线备份：服务器提供了简易的备份功能，可实现多设备的同步，需要手动上传下载，暂时无法自动同步。
- Github 备份: 同步至 Github 仓库，SHA 不匹配时同步失败，可清除 SHA 后进行覆写。
- 历史备份: 于本地的每日备份(`backup`目录)，可选择历史备份进行还原

**安卓外部储存**

> 已禁用

安卓用户可选择是否开启外部储存(若存在 SD 卡)，更改设置时，可选择自动迁移源数据至目标文件夹。
注意若目标文件已存在，自动迁移将覆盖数据！若不自动迁移，建议手动迁移数据后重启应用。

> 做好手动备份以防意外！主要用户数据为`userdata`、`config`和`backup`文件夹。

需要重启应用使该设置生效。

### 游戏数据管理

游戏数据有一定的版本兼容性要求，即要求客户端版本大于其最低版本要求。若无法更新新数据时请先升级 app。

- 下载源: 在设置页顶部的 chaldea 服务器，分国内和海外，若海外无法连接下载，请切换国内源
- 自动更新: 应用启动后后台更新，下载启动时可应用更新或手动更新
- 缓存图标: 主要是从者/礼装等图标及 buff 图标，约 3000+
- 清楚缓存: 可分别清理内存缓存、temp 目录、图片资源目录等类别

### 防剧透设置 {#spoiler-settings}

有两处类似的关于剧透设置

1. “隐藏未实装卡牌”:
   - 仅仅是默认在列表页开启未实装筛选，所有数据仍在，关闭筛选或其他地方仍可见所有信息
   - 筛选根据当前账号所在区服进行隐藏未实装卡牌
2. “删除未实装卡卡牌”:
   - 在加载数据时即刻删除所有未实装的“从者/礼装/纹章”，活动、主线和御主礼装保持不变
   - 不同游戏账号之间使用相同的剧透设置，即使账号所设置的区服不同
   - 当浏览未来活动时，会遇到部分仅显示`IDxxx`的图标，这是由于本地数据库已无相应记录无法显示。
   - 防剧透设置需重启以应用更改

### 通用设置

- 多语言支持：中(简&繁)、英、日、韩(部分支持)
- 深色模式/夜间模式
- 置顶显示: 仅桌面端可用
- 自动旋转: 仅移动端（iPad 除外），是否允许横屏
- 首页显示当前账号名称
- 轮播设置：首页轮播图，以下几个数据源
  - App 通知：通常为有严重 bug 时来催赶紧更新，部分通知为常驻
  - Mooncell 首页轮播图
  - 各区服服公告栏轮播图

### 显示设置

- 筛选自动重置：主要用于从者/礼装/纹章列表页筛选选项在每次进入时自动重置
- 从者列表页
  - **关注**按钮默认选项：
    关注按钮有三种状态（关注/未关注/所有），可设置每次进入时时重设为所有、已关注或记住上一次选择
  - 顶部职阶筛选样式
    - 自动匹配
    - 单行不展开 Extra 职阶
    - 单行并展开 Extra 职阶
    - 两行显示，Extra 职阶显示在第二行
    - 隐藏职阶筛选（仍可在弹出的筛选设置里设置）
  - [规划列表页]统一设置附加技能: 仅技能 2 或 全部三个技能
- 从者详情页
  - 标签页排序：规划、技能、宝具等等标签页自定义排序，
  - 优先级备注：从者优先级有 1-5，该备注项主要用于标记每个优先级的含义，显示在图标下方

## APP 自动更新

在`关于Chaldea`中可开启自动更新，启动时自动检测可用更新并跳转至下载链接。

- 手动解压并覆盖 Windows/Linux 程序或安装 apk
- iOS 和 macOS 商店版请前往 App Store 更新
